"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[200],{200:function(e,r,t){t.r(r),t.d(r,{default:function(){return T}});var s=t(6768),i=t(4232);const n={class:"doing-exercises"},o={class:"header"},c={key:0,class:"loading"},a={key:1,class:"exercise-container"},u=["src"],l={class:"exercise-info"},h={class:"timer"},d={class:"repetitions"},p={class:"progress-bar"},m={class:"progress-text"},k={class:"actions"},x={key:2,class:"finished"};function A(e,r,t,A,g,f){const v=(0,s.g2)("ArrowBack");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",o,[(0,s.bF)(v,{action:"goChooseTraining"}),r[3]||(r[3]=(0,s.Lk)("h1",null,"Выполнение тренировки",-1))]),g.loading?((0,s.uX)(),(0,s.CE)("div",c,"Загрузка...")):f.currentExercise?((0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("video",{src:f.currentExercise.video_file,muted:"",loop:"",autoplay:"",playsinline:"",class:"exercise-video"},null,8,u),(0,s.Lk)("div",l,[(0,s.Lk)("h2",null,(0,i.v_)(f.currentExercise.name),1),(0,s.Lk)("p",null,(0,i.v_)(f.currentExercise.description),1),(0,s.Lk)("div",h,[(0,s.Lk)("div",{class:"timer-circle",style:(0,i.Tr)({"--progress":f.timerProgress})},[(0,s.Lk)("span",null,(0,i.v_)(f.formatTime(g.remainingTime)),1)],4)]),(0,s.Lk)("p",d," Повторения: "+(0,i.v_)(g.currentRep)+" / "+(0,i.v_)(f.currentExercise.repetitions),1),(0,s.Lk)("div",p,[(0,s.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:f.workoutProgress+"%"})},null,4)]),(0,s.Lk)("p",m," Упражнение "+(0,i.v_)(g.currentIndex+1)+" из "+(0,i.v_)(f.totalExercises),1),(0,s.Lk)("div",k,[(0,s.Lk)("button",{onClick:r[0]||(r[0]=(...e)=>f.skipExercise&&f.skipExercise(...e)),class:"btn-skip"},"Пропустить"),(0,s.Lk)("button",{onClick:r[1]||(r[1]=(...e)=>f.pauseTimer&&f.pauseTimer(...e)),class:"btn-pause"},(0,i.v_)(g.isPaused?"Продолжить":"Пауза"),1)])])])):g.isFinished?((0,s.uX)(),(0,s.CE)("div",x,[r[4]||(r[4]=(0,s.Lk)("h2",null,"Тренировка завершена!",-1)),(0,s.Lk)("button",{onClick:r[2]||(r[2]=(...e)=>f.goToEnd&&f.goToEnd(...e)),class:"btn-finish"},"Перейти к результатам")])):(0,s.Q3)("",!0)])}t(4114),t(8111),t(116),t(1701);var g=t(7397),f=t(4300),v={name:"DoingExercises",components:{ArrowBack:g.A},data(){return{workout:null,exercises:[],currentIndex:0,currentRep:1,remainingTime:0,totalTime:0,isPaused:!1,isFinished:!1,loading:!0,timerInterval:null}},computed:{currentExercise(){return this.exercises[this.currentIndex]||null},totalExercises(){return this.exercises.length},workoutProgress(){if(!this.totalExercises)return 0;const e=this.currentIndex+(this.currentRep-1)/this.currentExercise.repetitions;return e/this.totalExercises*100},timerProgress(){return(this.totalTime-this.remainingTime)/this.totalTime*100}},async mounted(){const e=this.$route.params.workoutId;e?(await this.loadWorkout(e),this.startExercise()):this.$router.push("/choose_training")},beforeUnmount(){this.timerInterval&&clearInterval(this.timerInterval)},methods:{async loadWorkout(e){this.loading=!0;try{const r=await(0,f.Z$)();this.workout=r.data.find(r=>r.id==e),this.workout&&(this.exercises=this.workout.exercises.map(e=>({...e.exercise,order:e.order})).sort((e,r)=>e.order-r.order))}catch(r){console.error("Ошибка загрузки тренировки:",r),this.$router.push("/choose_training")}finally{this.loading=!1}},startExercise(){this.currentExercise&&(this.totalTime=this.currentExercise.duration,this.remainingTime=this.totalTime,this.timerInterval=setInterval(()=>{!this.isPaused&&this.remainingTime>0&&this.remainingTime--,this.remainingTime<=0&&this.nextRepOrExercise()},1e3))},nextRepOrExercise(){clearInterval(this.timerInterval),this.currentRep<this.currentExercise.repetitions?(this.currentRep++,this.startExercise()):this.currentIndex<this.totalExercises-1?(this.currentIndex++,this.currentRep=1,this.goToRest()):this.finishWorkout()},goToRest(){clearInterval(this.timerInterval),this.$router.push({name:"RestExercises",params:{workoutId:this.workout.id},query:{next:this.currentIndex}})},finishWorkout(){this.isFinished=!0,clearInterval(this.timerInterval)},goToEnd(){this.$router.push({name:"EndExercises",params:{workoutId:this.workout.id}})},skipExercise(){this.nextRepOrExercise()},pauseTimer(){this.isPaused=!this.isPaused},formatTime(e){const r=Math.floor(e/60).toString().padStart(2,"0"),t=(e%60).toString().padStart(2,"0");return`${r}:${t}`}}},E=t(1241);const I=(0,E.A)(v,[["render",A],["__scopeId","data-v-17a72416"]]);var T=I},4300:function(e,r,t){t.d(r,{C_:function(){return u},O7:function(){return a},Z$:function(){return l},ZP:function(){return c},_O:function(){return h},fD:function(){return p},q7:function(){return o},rW:function(){return d}});var s=t(4373),i=t(9221);const n=s.A.create({baseURL:"/api/"});n.interceptors.response.use(e=>e,async e=>{const r=e.config;if(401===e.response?.status&&!r._retry){r._retry=!0;const e=await i.A.refreshToken();if(e)return n(r)}return Promise.reject(e)});const o=()=>n.get("exercises/"),c=e=>n.post("exercises/",e),a=(e,r)=>n.put(`exercises/${e}/`,r),u=e=>n.delete(`exercises/${e}/`),l=()=>n.get("workouts/"),h=e=>n.post("workouts/",e),d=(e,r)=>n.put(`workouts/${e}/`,r),p=e=>n.delete(`workouts/${e}/`)},7397:function(e,r,t){t.d(r,{A:function(){return l}});var s=t(6768),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALvSURBVHgB1ZlNTxNBGMdnX9DSAlpL2oOJB9QYiumReLBNPOBFSbzgBT14ggt68OrJiwejH8DPQJQSDkjTpNoD6sVETKjRGCQYDKV2oYsBtrvrzMLSlvTl2ZeZXf6nTjP7zO+/OzPPPLsInXBxyAPpum6Mm83mn6yt/XkqCILGcfyv8fE7l/DfPMdxVWgs5gZM+JmZty9LpfLDQOA0b4BgaNwWp6YedB00OQUSj6mBVvCmeJ5TSiWJOzQBEo8YyYRPp+dfNIMn0jS9KxjsFpaWlm8ioJgYqIff3JQeNYOv9dWQIIjbCCgRUVYNfqEjPJ73qqpqO/H45Q8IKKpPoBH+b0f4SkVWJibuncHXgW8stUXcacE2QBzCT07e7ybwnm+jrOCN65HLYglP5OoaqM15NvBGHOSSWN/5o1jIBXkFT+Q4DzRmWIkpvBETOZCVDEsDnsj2IraaYWnAG7GRDdnJsDTgjfjIorxcsE3HsNLZb/DGONCOfoQ3xoJ08is8EXQX4mZnM8/9Bk8EMlAsFqOrq78ft4PH9WxVlnf2WMIb40I6bWxsD4ZCQb1dH1n+J46O3opj+FOs4IlABoaGLua3tirkVUdLE9igOj39ZqVQ+HnFSkXlVOBMPDJyfbhcllqawNBCJBJWM5l3X7CJQVYmQIOQKYGBPuOKO5XPf3ofDp/VzZ2pXvUmcDOB28u0pxO8eD4wsYh/+sqEpcfsRxOW56nfTNhaaH4yYXun8IsJR1udH0w43qu9NuFKsvHShGvZ0isTrqZ7L0y4fl5hbYLKgYulCWonRlYmqB557ZgQRfEqbn+DmqD+kY+AJBLxxWRyOAWpJ+bmFr4iC29LmHyltGKir68XFQo/bgBDI2alH3Q67e7uoXC49zswLDsDRJ1MKEpVjUYjr2Ox2Ao0JlMDRKYJQdCT2ezHfH//ORVPHn5/X9F6ekLpsbHbd5s9mZbxkEciRf/6unQ+l8vNY/jAwMCFV6nUtWcEvt3bj+P6Dx/LlNCuGSrcAAAAAElFTkSuQmCC";const n={class:"Arrow_Back"};function o(e,r,t,o,c,a){return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("button",{class:"Arrow_Back_btn",onClick:r[0]||(r[0]=(...e)=>a.handleClick&&a.handleClick(...e))},[...r[1]||(r[1]=[(0,s.Lk)("img",{src:i},null,-1)])])])}t(4114);var c={name:"ArrowBack",props:{action:{type:String,default:"closeModal"}},data(){return{}},methods:{handleClick(){"goHome"===this.action?this.$router.push("/"):"goChooseTraining"===this.action?this.$router.push("/choose_training"):this.$emit("close")}}},a=t(1241);const u=(0,a.A)(c,[["render",o],["__scopeId","data-v-468c7b7b"]]);var l=u}}]);
//# sourceMappingURL=200.630141dd.js.map