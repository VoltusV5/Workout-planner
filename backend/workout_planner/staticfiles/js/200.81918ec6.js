"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[200],{200:function(e,s,r){r.r(s),r.d(s,{default:function(){return T}});var t=r(6768),i=r(4232);const n={class:"doing-exercises"},o={class:"header"},a={key:0,class:"loading"},c={key:1,class:"exercise-container"},l=["src"],u={class:"exercise-info"},h={class:"timer"},d={class:"repetitions"},m={class:"progress-bar"},p={class:"progress-text"},k={class:"actions"},A={key:2,class:"finished"};function x(e,s,r,x,g,v){const E=(0,t.g2)("ArrowBack");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("div",o,[(0,t.bF)(E,{action:"goChooseTraining"}),s[3]||(s[3]=(0,t.Lk)("h1",null,"Выполнение тренировки",-1))]),g.loading?((0,t.uX)(),(0,t.CE)("div",a,"Загрузка...")):v.currentExercise?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("video",{src:v.currentExercise.video_file,muted:"",loop:"",autoplay:"",playsinline:"",class:"exercise-video"},null,8,l),(0,t.Lk)("div",u,[(0,t.Lk)("h2",null,(0,i.v_)(v.currentExercise.name),1),(0,t.Lk)("p",null,(0,i.v_)(v.currentExercise.description),1),(0,t.Lk)("div",h,[(0,t.Lk)("div",{class:"timer-circle",style:(0,i.Tr)({"--progress":v.timerProgress})},[(0,t.Lk)("span",null,(0,i.v_)(v.formatTime(g.remainingTime)),1)],4)]),(0,t.Lk)("p",d," Повторения: "+(0,i.v_)(g.currentRep)+" / "+(0,i.v_)(v.currentExercise.repetitions),1),(0,t.Lk)("div",m,[(0,t.Lk)("div",{class:"progress-fill",style:(0,i.Tr)({width:v.workoutProgress+"%"})},null,4)]),(0,t.Lk)("p",p," Упражнение "+(0,i.v_)(g.currentIndex+1)+" из "+(0,i.v_)(v.totalExercises),1),(0,t.Lk)("div",k,[(0,t.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>v.skipExercise&&v.skipExercise(...e)),class:"btn-skip"},"Пропустить"),(0,t.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>v.pauseTimer&&v.pauseTimer(...e)),class:"btn-pause"},(0,i.v_)(g.isPaused?"Продолжить":"Пауза"),1)])])])):g.isFinished?((0,t.uX)(),(0,t.CE)("div",A,[s[4]||(s[4]=(0,t.Lk)("h2",null,"Тренировка завершена!",-1)),(0,t.Lk)("button",{onClick:s[2]||(s[2]=(...e)=>v.goToEnd&&v.goToEnd(...e)),class:"btn-finish"},"Перейти к результатам")])):(0,t.Q3)("",!0)])}r(4114),r(8111),r(116),r(1701);var g=r(7397),v=r(4300),E={name:"DoingExercises",components:{ArrowBack:g.A},data(){return{workout:null,exercises:[],currentIndex:0,currentRep:1,remainingTime:0,totalTime:0,isPaused:!1,isFinished:!1,loading:!0,timerInterval:null}},computed:{currentExercise(){return this.exercises[this.currentIndex]||null},totalExercises(){return this.exercises.length},workoutProgress(){if(!this.totalExercises)return 0;const e=this.currentIndex+(this.currentRep-1)/this.currentExercise.repetitions;return e/this.totalExercises*100},timerProgress(){return(this.totalTime-this.remainingTime)/this.totalTime*100}},async mounted(){const e=this.$route.params.workoutId;e?(await this.loadWorkout(e),this.startExercise()):this.$router.push("/choose_training")},beforeUnmount(){this.timerInterval&&clearInterval(this.timerInterval)},methods:{async loadWorkout(e){this.loading=!0;try{const s=await(0,v.Z$)();this.workout=s.data.find(s=>s.id==e),this.workout&&(this.exercises=this.workout.exercises.map(e=>({...e.exercise,order:e.order})).sort((e,s)=>e.order-s.order))}catch(s){console.error("Ошибка загрузки тренировки:",s),this.$router.push("/choose_training")}finally{this.loading=!1}},startExercise(){this.currentExercise&&(this.totalTime=this.currentExercise.duration,this.remainingTime=this.totalTime,this.timerInterval=setInterval(()=>{!this.isPaused&&this.remainingTime>0&&this.remainingTime--,this.remainingTime<=0&&this.nextRepOrExercise()},1e3))},nextRepOrExercise(){clearInterval(this.timerInterval),this.currentRep<this.currentExercise.repetitions?(this.currentRep++,this.startExercise()):this.currentIndex<this.totalExercises-1?(this.currentIndex++,this.currentRep=1,this.goToRest()):this.finishWorkout()},goToRest(){clearInterval(this.timerInterval),this.$router.push({name:"RestExercises",params:{workoutId:this.workout.id},query:{next:this.currentIndex}})},finishWorkout(){this.isFinished=!0,clearInterval(this.timerInterval)},goToEnd(){this.$router.push({name:"EndExercises",params:{workoutId:this.workout.id}})},skipExercise(){this.nextRepOrExercise()},pauseTimer(){this.isPaused=!this.isPaused},formatTime(e){const s=Math.floor(e/60).toString().padStart(2,"0"),r=(e%60).toString().padStart(2,"0");return`${s}:${r}`}}},f=r(1241);const I=(0,f.A)(E,[["render",x],["__scopeId","data-v-17a72416"]]);var T=I},7397:function(e,s,r){r.d(s,{A:function(){return u}});var t=r(6768),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALvSURBVHgB1ZlNTxNBGMdnX9DSAlpL2oOJB9QYiumReLBNPOBFSbzgBT14ggt68OrJiwejH8DPQJQSDkjTpNoD6sVETKjRGCQYDKV2oYsBtrvrzMLSlvTl2ZeZXf6nTjP7zO+/OzPPPLsInXBxyAPpum6Mm83mn6yt/XkqCILGcfyv8fE7l/DfPMdxVWgs5gZM+JmZty9LpfLDQOA0b4BgaNwWp6YedB00OQUSj6mBVvCmeJ5TSiWJOzQBEo8YyYRPp+dfNIMn0jS9KxjsFpaWlm8ioJgYqIff3JQeNYOv9dWQIIjbCCgRUVYNfqEjPJ73qqpqO/H45Q8IKKpPoBH+b0f4SkVWJibuncHXgW8stUXcacE2QBzCT07e7ybwnm+jrOCN65HLYglP5OoaqM15NvBGHOSSWN/5o1jIBXkFT+Q4DzRmWIkpvBETOZCVDEsDnsj2IraaYWnAG7GRDdnJsDTgjfjIorxcsE3HsNLZb/DGONCOfoQ3xoJ08is8EXQX4mZnM8/9Bk8EMlAsFqOrq78ft4PH9WxVlnf2WMIb40I6bWxsD4ZCQb1dH1n+J46O3opj+FOs4IlABoaGLua3tirkVUdLE9igOj39ZqVQ+HnFSkXlVOBMPDJyfbhcllqawNBCJBJWM5l3X7CJQVYmQIOQKYGBPuOKO5XPf3ofDp/VzZ2pXvUmcDOB28u0pxO8eD4wsYh/+sqEpcfsRxOW56nfTNhaaH4yYXun8IsJR1udH0w43qu9NuFKsvHShGvZ0isTrqZ7L0y4fl5hbYLKgYulCWonRlYmqB557ZgQRfEqbn+DmqD+kY+AJBLxxWRyOAWpJ+bmFr4iC29LmHyltGKir68XFQo/bgBDI2alH3Q67e7uoXC49zswLDsDRJ1MKEpVjUYjr2Ox2Ao0JlMDRKYJQdCT2ezHfH//ORVPHn5/X9F6ekLpsbHbd5s9mZbxkEciRf/6unQ+l8vNY/jAwMCFV6nUtWcEvt3bj+P6Dx/LlNCuGSrcAAAAAElFTkSuQmCC";const n={class:"Arrow_Back"};function o(e,s,r,o,a,c){return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("button",{class:"Arrow_Back_btn",onClick:s[0]||(s[0]=(...e)=>c.handleClick&&c.handleClick(...e))},[...s[1]||(s[1]=[(0,t.Lk)("img",{src:i},null,-1)])])])}r(4114);var a={name:"ArrowBack",props:{action:{type:String,default:"closeModal"}},data(){return{}},methods:{handleClick(){"goHome"===this.action?this.$router.push("/"):"goChooseTraining"===this.action?this.$router.push("/choose_training"):this.$emit("close")}}},c=r(1241);const l=(0,c.A)(a,[["render",o],["__scopeId","data-v-468c7b7b"]]);var u=l}}]);
//# sourceMappingURL=200.81918ec6.js.map